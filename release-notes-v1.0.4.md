# Release v1.0.4: Core API Engine & Parser Enhancement

## 核心优化项

### 1. 配置文件管理引擎优化 (config-manager.ts)
- **安全增强**: 改进配置加密/解密逻辑，在加载时即解密，内存中保持解密状态
- **性能提升**: 避免重复解密操作，getConfig 和 getAllConfigs 直接返回内存中的解密数据
- **错误处理优化**: 区分真正的加密内容和明文内容，减少不必要的错误日志
- **降级处理**: 当安全存储不可用时，优雅降级到 Base64 编码

### 2. 监控状态同步修复 (index.ts)
- **关键修复**: 修复配置启用/禁用状态切换时的监控状态同步问题
- **自动同步**: 现在禁用配置时会自动停止对应监控，启用时自动启动
- **状态一致性**: 确保配置文件状态与监控调度器状态保持一致

### 3. API 配置与测试架构改进 (APIConfigForm.tsx, App.tsx)
- **状态管理**: 集成 Zustand store，同步 API 表单状态到全局状态
- **测试流程简化**: 移除独立的测试标签页，测试功能整合到 API 配置和解析器配置中
- **验证优化**: 简化 API 测试验证，移除名称和 API Key 的强制验证（可在运行时输入）
- **实时同步**: API 配置变更实时同步到 store，供解析器测试使用

### 4. UI/UX 体验优化 (App.tsx, StatusPanel.tsx)
- **仪表盘优化**: 仅显示启用监控的配置状态，界面更简洁清晰
- **新建配置体验**: 提供默认数据模板，减少用户初始配置成本
- **配置名编辑**: 支持实时编辑和失焦自动保存，编辑体验更流畅
- **导航结构**: 移除测试标签页，保留核心功能标签（API配置、解析器、监控设置）

### 5. 代码质量与可维护性
- **统一格式化**: 移除代码尾部逗号，统一代码风格
- **日志优化**: 改进日志输出格式，增加关键信息展示
- **类型安全**: 完善 TypeScript 类型定义，提升代码健壮性
- **组件结构**: 优化组件 props 和状态管理，减少不必要的重新渲染

### 6. 余额解析器增强 (ParserConfig.tsx)
- **预设模板**: 优化预设模板选择和切换逻辑
- **测试集成**: 解析器测试直接集成在配置页面，无需切换标签
- **UI 改进**: 优化按钮和布局样式，提升用户体验

## 技术债务
- 版本升级: v1.0.3 → v1.0.4
- 配置加密方案向下兼容，支持旧版明文配置的迁移
- 移除冗余的测试连接组件，功能已整合到各配置组件